<body>
<article class="markdown-body entry-content" itemprop="text" style="font-family:'DejaVu Sans', Arial, Helvetica, sans-serif;">
    <h1><a id="user-content-abstract-operator" class="anchor" aria-hidden="true" href="#abstract-operator">
        <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
            <path fill-rule="evenodd"
                  d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
        </svg>
    </a>abstract-operator
    </h1>
    <p><a href="https://travis-ci.org/jvm-operators/abstract-operator" rel="nofollow"><img
            src="https://camo.githubusercontent.com/240f7e32166b0ca21bbb7a16f3bcac77b78272b0/68747470733a2f2f7472617669732d63692e6f72672f6a766d2d6f70657261746f72732f61627374726163742d6f70657261746f722e7376673f6272616e63683d6d6173746572"
            alt="Build status"
            data-canonical-src="https://travis-ci.org/jvm-operators/abstract-operator.svg?branch=master"
            style="max-width:100%;"></a>
        <a href="http://www.apache.org/licenses/LICENSE-2.0" rel="nofollow"><img
                src="https://camo.githubusercontent.com/3a4d3bc039085cffdfecbe3077ffe49c5fe23286/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6c6963656e73652d4170616368652d2d322e302d626c75652e737667"
                alt="License" data-canonical-src="https://img.shields.io/badge/license-Apache--2.0-blue.svg"
                style="max-width:100%;"></a></p>
    <p><code>{ConfigMap|CRD}</code>-based approach for lyfecycle management of various resources in Kubernetes and
        OpenShift. Using the Operator pattern, you can leverage the Kubernetes control loop and react on various events
        in the cluster.</p>
    <h2><a id="user-content-example-implementations" class="anchor" aria-hidden="true" href="#example-implementations">
        <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
            <path fill-rule="evenodd"
                  d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
        </svg>
    </a>Example Implementations
    </h2>
    <ul>
        <li><a href="https://github.com/radanalyticsio/spark-operator">spark-operator</a> - Java operator for managing
            Apache Spark clusters and apps
        </li>
        <li><a href="https://github.com/jvm-operators/scala-example-operator">scala-example-operator</a> - Minimalistic
            operator in Scala
        </li>
        <li><a href="https://github.com/jvm-operators/kotlin-example-operator">kotlin-example-operator</a> -
            Minimalistic operator in Kotlin
        </li>
    </ul>
    <h2><a id="user-content-code" class="anchor" aria-hidden="true" href="#code">
        <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
            <path fill-rule="evenodd"
                  d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
        </svg>
    </a>Code
    </h2>
    <p>This library can be simply used by adding it to classpath; creating a new class that extends <code>AbstractOperator</code>.
        This 'concrete operator' class needs to also have the <code>@Operator</code> annotation on it. For capturing the
        information about the monitored resources one has to also create a class that extends <code>EntityInfo</code>
        and have arbitrary fields on it with getters and setters.</p>
    <p>This class can be also generated from the JSON schema. To do that add <a
            href="https://github.com/radanalyticsio/spark-operator/blob/4f72e740ea2126843b0c240bd800a74169d5f1c2/pom.xml#L50:L53">jsonschema2pojo</a>
        plugin to the pom.xml and json schema to resources (<a
                href="https://github.com/radanalyticsio/spark-operator/tree/4f72e740ea2126843b0c240bd800a74169d5f1c2/src/main/resources/schema">example</a>).
    </p>
    <p>This is a no-op operator in Scala that simply logs into console when config map with label <code>radanalytics.io/kind
        = foo</code> is created.</p>
    <div class="highlight highlight-source-scala"><pre><span class="pl-k">@</span><span class="pl-en">Operator</span>(forKind <span
            class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>foo<span
            class="pl-pds">"</span></span>, prefix <span class="pl-k">=</span> <span class="pl-s"><span
            class="pl-pds">"</span>radanalytics.io<span class="pl-pds">"</span></span>, infoClass <span
            class="pl-k">=</span> <span class="pl-c1">classOf</span>[<span class="pl-en">FooInfo</span>])
<span class="pl-k">class</span> <span class="pl-en">FooOperator</span> <span class="pl-k">extends</span> <span
                class="pl-e">AbstractOperator</span>[<span class="pl-en">FooInfo</span>] {
  <span class="pl-k">val</span> <span class="pl-smi">log</span><span class="pl-k">:</span> <span
                class="pl-en">Logger</span> <span class="pl-k">=</span> <span class="pl-en">LoggerFactory</span>.getLogger(<span
                class="pl-c1">classOf</span>[<span class="pl-en">FooInfo</span>].getName)

  <span class="pl-k">@</span><span class="pl-en">Override</span>
  <span class="pl-k">def</span> <span class="pl-en">onAdd</span>(<span class="pl-v">foo</span>: <span class="pl-en">FooInfo</span>) <span
                class="pl-k">=</span> {
    log.info(s<span class="pl-s"><span class="pl-pds">"</span>created foo with name ${foo.name} and someParameter = ${foo.someParameter}<span
                class="pl-pds">"</span></span>)
  }

  <span class="pl-k">@</span><span class="pl-en">Override</span>
  <span class="pl-k">def</span> <span class="pl-en">onDelete</span>(<span class="pl-v">foo</span>: <span class="pl-en">FooInfo</span>) <span
                class="pl-k">=</span> {
    log.info(s<span class="pl-s"><span class="pl-pds">"</span>deleted foo with name ${foo.name} and someParameter = ${foo.someParameter}<span
                class="pl-pds">"</span></span>)
  }
}</pre>
    </div>
    <h3><a id="user-content-crds" class="anchor" aria-hidden="true" href="#crds">
        <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
            <path fill-rule="evenodd"
                  d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
        </svg>
    </a>CRDs
    </h3>
    <p>By default the operator is based on <code>CustomResourceDefinitions</code>, if you want to create <code>ConfigMap</code>-based
        operator, add <code>crd=false</code> parameter in the <code>@Operator</code> annotation. Custom Resource operation mode will try to create
        the custom resource definition from the <code>infoClass</code> if it's not already there and then it listens on
        the newly created, deleted or modified custom resources (CR) of the given type.</p>
    <p>For the CRDs the:</p>
    <ul>
        <li><code>forKind</code> field represent the name of the <code>CRD</code> ('s' at the end for plular)</li>
        <li><code>pluralName</code> explicitly se the plural name of the CR</li>
        <li><code>prefix</code> field in the annotation represents the group</li>
        <li><code>shortNames</code> short names that can be used instead of the long version (service -&gt; svc, namespace -&gt; ns, etc.)</li>
        <li><code>enabled</code> by default it's enabled, but one may want to temporarily disable/silence the operator</li>
        <li>as for the version, currently the <code>v1</code> is created automatically, but one can also create the
            <code>CRD</code> on his own before running the operator and providing the <code>forKind</code> and <code>prefix</code>
            matches, operator will use the existing <code>CRD</code></li>
    </ul>
    <h2><a id="user-content-documentation" class="anchor" aria-hidden="true" href="#documentation">
        <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
            <path fill-rule="evenodd"
                  d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
        </svg>
    </a>Documentation
    </h2>
</article>
</body>
